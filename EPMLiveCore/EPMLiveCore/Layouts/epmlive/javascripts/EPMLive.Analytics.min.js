function initializeAnalytics(){(function(n,t,i){function e(){i.ajax({type:"POST",url:epmLive.currentWebFullUrl+"/_vti_bin/WorkEngine.asmx/Execute",data:"{ Function: 'LoadFavoriteStatus', Dataxml: '"+r+"' }",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(n.d){var f=t.parseJson(n.d),u=f.Result;t.responseIsSuccess(u)&&u["#text"]==="false"?i("#favoritesStar").fadeIn(1e3):t.responseIsSuccess(u)&&u["#text"]==="true"&&(i("#favoritesStar").addClass("icon-star-active"),i("#favoritesStar").fadeIn(1e3)),i("#favoritesStar").click(function(){var n,t;i(this).hasClass("icon-star-active")?i.ajax({type:"POST",url:epmLive.currentWebFullUrl+"/_vti_bin/WorkEngine.asmx/Execute",data:"{ Function: 'RemoveFavorites', Dataxml: '"+r+"' }",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var r,t,u;n.d&&(r=epmLive.parseJson(n.d),t=r.Result,epmLive.responseIsSuccess(t)&&t["#text"]&&(i("#favoritesStar").removeClass("icon-star-active"),i.pnotify({title:"Favorite Removed",text:"An existing item has been removed from your favorites list.",type:"success",styling:"jqueryui"}),u=t["#text"].split(","),window.epmLiveNavigation.removeLink({kind:0,id:u[0]})))},error:function(){}}):(n=document.createElement("div"),n.innerHTML=document.getElementById("fav_Add_DivTemp").innerHTML,t={html:n,height:110,width:265,title:"Add Favorite",dialogReturnValueCallback:function(n,t){n===1&&o(t)}},SP.SOD.execute("SP.UI.Dialog.js","SP.UI.ModalDialog.showModalDialog",t))})}},error:function(){}})}function o(n){i.ajax({type:"POST",url:epmLive.currentWebFullUrl+"/_vti_bin/WorkEngine.asmx/Execute",data:"{ Function: 'AddFavorites', Dataxml: '<Data><Param key=\"SiteId\">"+t.currentSiteId+'<\/Param><Param key="WebId">'+t.currentWebId+'<\/Param><Param key="ListId">'+t.currentListId+'<\/Param><Param key="ListViewUrl">'+t.currentListViewUrl+'<\/Param><Param key="ListIconClass">'+t.currentListIcon+'<\/Param><Param key="ItemId">'+t.currentItemID+'<\/Param><Param key="FString">'+t.currentUrl+'<\/Param><Param key="Type">1<\/Param><Param key="UserId">'+t.currentUserId+'<\/Param><Param key="Title">'+n+'<\/Param><Param key="FileIsNull">'+t.currentFileIsNull+"<\/Param><\/Data>' }",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var e,u,r,f;n.d&&(e=epmLive.parseJson(n.d),u=e.Result,epmLive.responseIsSuccess(u)&&u["#text"]&&(i("#favoritesStar").addClass("icon-star-active"),i.pnotify({title:"New Favorite Added",text:"A new item has been added to your favorites list.",type:"success",styling:"jqueryui"}),r=u["#text"].split(","),f=0,t.currentItemID!="-1"&&t.currentFileIsNull=="True"&&(f=1),window.epmLiveNavigation.registerLink({kind:f,id:r[0],title:r[6],url:r[9],cssClass:r[7],siteId:r[1],webId:r[2],listId:r[3],itemId:r[4],external:!1})))},error:function(){}})}function s(){i.ajax({type:"POST",url:epmLive.currentWebFullUrl+"/_vti_bin/WorkEngine.asmx/Execute",data:"{ Function: 'LoadFavoriteStatus', Dataxml: '"+u+"' }",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(n.d){var u=t.parseJson(n.d),r=u.Result;t.responseIsSuccess(r)&&r["#text"]==="false"?i("#favoritesStar").fadeIn(1e3):t.responseIsSuccess(r)&&r["#text"]==="true"&&(i("#favoritesStar").addClass("icon-star-active"),i("#favoritesStar").fadeIn(1e3))}},error:function(){}})}function f(n){var t=n,u;if(n.indexOf("Source")!=-1){var i="",f=n.split("?"),r=f[1].split("&");for(u in r)if(r[u].split("=")[0].toLowerCase()==="source"){i=r;break}i&&(t=t.replace(i,""))}return t}var r='<Data><Param key="SiteId">'+t.currentSiteId+'<\/Param><Param key="WebId">'+t.currentWebId+'<\/Param><Param key="ListId">'+t.currentListId+'<\/Param><Param key="ListIconClass">'+t.currentListIcon+'<\/Param><Param key="ListView">'+t.currentListViewUrl+'<\/Param><Param key="ItemId">'+t.currentItemID+'<\/Param><Param key="FileIsNull">'+t.currentFileIsNull+'<\/Param><Param key="FString">'+t.currentUrl+'<\/Param><Param key="Type">1<\/Param><Param key="UserId">'+t.currentUserId+'<\/Param><Param key="PageTitle">'+t.pageName+"<\/Param><\/Data>",u;e(),u='<Data><Param key="SiteId">'+t.currentSiteId+'<\/Param><Param key="WebId">'+t.currentWebId+'<\/Param><Param key="ListId">'+t.currentListId+'<\/Param><Param key="ListIconClass">'+t.currentListIcon+'<\/Param><Param key="ListTitle">'+t.currentListTitle+'<\/Param><Param key="Type">3<\/Param><Param key="UserId">'+t.currentUserId+"<\/Param><\/Data>",s(),n.turnOnFav=function(){i("#favoritesStar").hasClass("icon-star-active")||i("#favoritesStar").addClass("icon-star-active")},n.turnOffFav=function(n){n.itemid=="-1"&&f(n.url)==f(t.currentUrl)&&i("#favoritesStar").hasClass("icon-star-active")&&i("#favoritesStar").removeClass("icon-star-active")}})(window.Analytics=window.Analytics||{},window.epmLive,window.jQuery)}ExecuteOrDelayUntilScriptLoaded(initializeAnalytics,"EPMLive.js");
//@ sourceMappingURL=EPMLive.Analytics.min.js.map